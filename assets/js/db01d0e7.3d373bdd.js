"use strict";(self.webpackChunkmy_website_2=self.webpackChunkmy_website_2||[]).push([[9724],{28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>c});var r=n(96540);const o={},a=r.createContext(o);function s(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(a.Provider,{value:t},e.children)}},46831:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"coding/typescript/advance/ts-decorator","title":"\u88c5\u9970\u5668","description":"\u9700\u63d0\u524d\u5728 tsconfig.json \u4e2d \u628a target \u4e0b\u65b9\u7684 experimentalDecorators \u548c emitDecoratorMetadata \u7f6e\u4e3a true","source":"@site/docs/coding/typescript/advance/ts-decorator.md","sourceDirName":"coding/typescript/advance","slug":"/coding/typescript/advance/ts-decorator","permalink":"/myblog/docs/coding/typescript/advance/ts-decorator","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/coding/typescript/advance/ts-decorator.md","tags":[{"inline":true,"label":"TypeScript","permalink":"/myblog/docs/tags/type-script"}],"version":"current","frontMatter":{"id":"ts-decorator","title":"\u88c5\u9970\u5668","tags":["TypeScript"]},"sidebar":"tutorialSidebar","previous":{"title":"\u7c7b","permalink":"/myblog/docs/coding/typescript/advance/ts-class"},"next":{"title":"\u679a\u4e3e","permalink":"/myblog/docs/coding/typescript/advance/ts-enum"}}');var o=n(74848),a=n(28453);const s={id:"ts-decorator",title:"\u88c5\u9970\u5668",tags:["TypeScript"]},c=void 0,l={},d=[{value:"\u7c7b\u88c5\u9970\u5668 ClassDecorator",id:"\u7c7b\u88c5\u9970\u5668-classdecorator",level:2},{value:"\u5c5e\u6027\u88c5\u9970\u5668 PropertyDescriptor",id:"\u5c5e\u6027\u88c5\u9970\u5668-propertydescriptor",level:2},{value:"\u53c2\u6570\u88c5\u9970\u5668 ParameterDecorator",id:"\u53c2\u6570\u88c5\u9970\u5668-parameterdecorator",level:2},{value:"\u65b9\u6cd5\u88c5\u9970\u5668 MethodDecorator",id:"\u65b9\u6cd5\u88c5\u9970\u5668-methoddecorator",level:2},{value:"\u88c5\u9970\u5668\u5de5\u5382",id:"\u88c5\u9970\u5668\u5de5\u5382",level:2}];function i(e){const t={code:"code",h2:"h2",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["\u9700\u63d0\u524d\u5728 ",(0,o.jsx)(t.code,{children:"tsconfig.json"})," \u4e2d \u628a ",(0,o.jsx)(t.code,{children:"target"})," \u4e0b\u65b9\u7684 ",(0,o.jsx)(t.code,{children:"experimentalDecorators"})," \u548c ",(0,o.jsx)(t.code,{children:"emitDecoratorMetadata"})," \u7f6e\u4e3a ",(0,o.jsx)(t.code,{children:"true"})]}),"\n",(0,o.jsx)(t.h2,{id:"\u7c7b\u88c5\u9970\u5668-classdecorator",children:"\u7c7b\u88c5\u9970\u5668 ClassDecorator"}),"\n",(0,o.jsx)(t.p,{children:"target \u662f\u6784\u9020\u51fd\u6570"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"const Base: ClassDecorator = (target) => {\n  target.prototype.name = 'olu'\n  target.prototype.fn = () => { console.log('olu aha') }\n}\n\n@Base\nclass Http {\n\n}\nconst http = new Http() as any\nconsole.log(http.name)\nconsole.log(http.fn())\n"})}),"\n",(0,o.jsx)(t.h2,{id:"\u5c5e\u6027\u88c5\u9970\u5668-propertydescriptor",children:"\u5c5e\u6027\u88c5\u9970\u5668 PropertyDescriptor"}),"\n",(0,o.jsx)(t.p,{children:"target \u662f\u539f\u578b\u5bf9\u8c61"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"const Name: PropertyDecorator = (target, key) => {\n  console.log(target, key)\n}\n\nclass Http {\n  @Name\n  olu: string\n  constructor() {\n    this.olu = 'olu'\n  }\n}\nconst http = new Http() as any\nconsole.log(http.name)\n"})}),"\n",(0,o.jsx)(t.h2,{id:"\u53c2\u6570\u88c5\u9970\u5668-parameterdecorator",children:"\u53c2\u6570\u88c5\u9970\u5668 ParameterDecorator"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"import axios from 'axios'\nconst Get = (url: string) => {\n  const fn:MethodDecorator = (target, key, descriptor: PropertyDescriptor) => {\n    const k = Reflect.getMetadata('metadataKey', target)\n    axios.get(url).then(res => {\n      descriptor.value(k ? res.data[k] : res.data)\n    })\n  }\n  return fn\n}\nimport 'reflect-metadata'\nconst Result = () => {\n  const fn:ParameterDecorator = (target, key, index) => {\n    Reflect.defineMetadata('metadataKey', 'value', target)\n  }\n  return fn\n}\n\n@Base('Olu cool')\nclass Http {\n  @Get('http://test.json')\n  getList(@Result() data: any) {\n    console.log(data)\n  }\n}\nconst http = new Http() as any\nconsole.log(http.name)\nconsole.log(http.fn())\n"})}),"\n",(0,o.jsx)(t.h2,{id:"\u65b9\u6cd5\u88c5\u9970\u5668-methoddecorator",children:"\u65b9\u6cd5\u88c5\u9970\u5668 MethodDecorator"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"\nimport axios from 'axios'\nconst Get = (url: string) => {\n  const fn:MethodDecorator = (target, key, descriptor: PropertyDescriptor) => {\n    axios.get(url).then(res => {\n      descriptor.value(res.data)\n    })\n  }\n  return fn\n}\n\n@Base('Olu cool')\nclass Http {\n  @Get('http://test.json')\n  getList(data: any) {\n    console.log(data)\n  }\n}\nconst http = new Http() as any\n"})}),"\n",(0,o.jsx)(t.h2,{id:"\u88c5\u9970\u5668\u5de5\u5382",children:"\u88c5\u9970\u5668\u5de5\u5382"}),"\n",(0,o.jsx)(t.p,{children:"\u67ef\u91cc\u5316\u4f20\u53c2"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"const Base = (name: string) => {\n  const fn: ClassDecorator = (target) => {\n    target.prototype.name = name\n    target.prototype.fn = () => { console.log('olu aha') }\n  }\n  return fn\n}\n\n@Base('Olu cool')\nclass Http {\n\n}\nconst http = new Http() as any\nconsole.log(http.name)\nconsole.log(http.fn()) \n"})})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(i,{...e})}):i(e)}}}]);