"use strict";(self.webpackChunkmy_website_2=self.webpackChunkmy_website_2||[]).push([[3854],{10391:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>i,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"coding/design-pattern/decorator-pattern-basics","title":"\u88c5\u9970\u5668\u6a21\u5f0f Decorator Pattern","description":"\u4ecb\u7ecd","source":"@site/docs/coding/design-pattern/decorator-pattern-basics.md","sourceDirName":"coding/design-pattern","slug":"/coding/design-pattern/decorator-pattern-basics","permalink":"/myblog/docs/coding/design-pattern/decorator-pattern-basics","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/coding/design-pattern/decorator-pattern-basics.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u6a21\u62df\u8d2d\u7269\u8f66","permalink":"/myblog/docs/coding/design-pattern/comprehensive-application-case"},"next":{"title":"\u5916\u89c2\u6a21\u5f0f Facade Pattern","permalink":"/myblog/docs/coding/design-pattern/facade-pattern-basics"}}');var c=r(74848),t=r(28453);const o={},a="\u88c5\u9970\u5668\u6a21\u5f0f Decorator Pattern",i={},l=[{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",level:2},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2},{value:"\u5e94\u7528\u573a\u666f",id:"\u5e94\u7528\u573a\u666f",level:2},{value:"ES7 \u88c5\u9970\u5668",id:"es7-\u88c5\u9970\u5668",level:3},{value:"\u4e09\u65b9\u5e93 core-decorators",id:"\u4e09\u65b9\u5e93-core-decorators",level:3},{value:"\u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1",id:"\u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"\u88c5\u9970\u5668\u6a21\u5f0f-decorator-pattern",children:"\u88c5\u9970\u5668\u6a21\u5f0f Decorator Pattern"})}),"\n",(0,c.jsx)(e.h2,{id:"\u4ecb\u7ecd",children:"\u4ecb\u7ecd"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"\u4e3a\u5bf9\u8c61\u6dfb\u52a0\u65b0\u529f\u80fd"}),"\n",(0,c.jsx)(e.li,{children:"\u4e0d\u6539\u53d8\u5176\u539f\u6709\u7684\u7ed3\u6784\u548c\u529f\u80fd"}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,c.jsx)(e.p,{children:"\u7c7b\u56fe\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-mermaid",children:"classDiagram\n\nClient --\x3e Decorator\nDecorator --\x3e Circle\n\nclass Client {\n  + circle: Circle\n  + dec: Decorator\n  +main () void\n}\n\nclass Decorator {\n  cricle: Circle\n  +draw() void\n  +setBorderStyle(circle)\n}\n\nclass Circle {\n  +draw() void\n}\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"class Circle {\n  draw(){\n    console.log('draw circle')\n  }\n}\n\nclass Decorator{\n  constructor(circle) {\n    this.circle = new Circle()\n  }\n\n  draw() {\n    this.circle.draw()\n    this.setborderStyle()\n  }\n\n  setborderStyle() {\n    console.log('set style..')\n  }\n}\n\nconst circle = new Circle()\ncircle.draw()\nconst dec = new Decorator(circle)\ndec.draw()\n"})}),"\n",(0,c.jsx)(e.h2,{id:"\u5e94\u7528\u573a\u666f",children:"\u5e94\u7528\u573a\u666f"}),"\n",(0,c.jsx)(e.h3,{id:"es7-\u88c5\u9970\u5668",children:"ES7 \u88c5\u9970\u5668"}),"\n",(0,c.jsxs)(e.p,{children:["\u5b9a\u4e49\u4e00\u4e2a\u7c7b Demo\uff0c\u5b9a\u4e49\u88c5\u9970\u5668 testDec, ",(0,c.jsx)(e.code,{children:"@testDec"}),"\u5199\u5728",(0,c.jsx)(e.code,{children:"class Demo"}),"\u524d\uff0ctestDec \u53ef\u4ee5\u83b7\u53d6\u5230\u53c2\u6570 target\uff0c\u5373\u5f53\u524d\u7684 demo \u7c7b\u3002\u7136\u540e\u5c31\u53ef\u4ee5\u5728 testDec \u4e2d\u5bf9 demo \u7684\u5c5e\u6027\u505a\u5904\u7406\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u4f8b\u5b50 1, \u5e26\u53c2\u7684\u88c5\u9970\u5668"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"// \u9700\u5b89\u88c5 @babel/plugin-proposal-decorators\n@testDec(false)\nclass Demo{\n\n}\n\nfunction testDec(isDec) {\n  return function (target){\n    target.isDec = isDec\n  }\n}\nconsole.log(Demo.isDec)\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u88c5\u9970\u5668\u5bf9\u7c7b\u7684\u884c\u4e3a\u7684\u6539\u53d8\u662f\u5728\u4ee3\u7801\u7f16\u8bd1\u65f6\u53d1\u751f\u7684\uff0c\u4e0d\u662f\u5728\u8fd0\u884c\u65f6"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"@decorators\nclass A{}\n// \u76f8\u5f53\u4e8e \ud83d\udc47\ud83c\udffb\nclass A{}\nA = decorators(A) || A\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u4f8b\u5b50 2"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"function mixins(list) {\n  return function (target) {\n    Object.assign(target.prototype, ...list);\n  }\n}\n\nconst Foo1 = {\n  foo1() {\n    console.log('foo1')\n  }\n}\n\nconst Foo2 = {\n  foo2() {\n    console.log('foo2')\n  }\n}\n\n@mixins([Foo1, Foo2])\nclass MyClass{}\n\nconst obj = new MyClass()\nobj.foo1()\nobj.foo2()\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u4f8b\u5b50 3"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"function readOnly(target, prop, description) {\n  description.writable = false\n  return description\n}\n\nclass Person {\n  constructor() {\n    this.name = 'olu'\n    this.age = 18\n  }\n\n  // \u88c5\u9970\u65b9\u6cd5\n  @readOnly\n  getInfo() {\n    return `name: ${this.name}, age: ${this.age}`\n  }\n}\n\nconst p = new Person\np.getInfo = function() {\n  console.log('olucool')\n}\nconsole.log(p.getInfo()) // \u8fd8\u662f\u539f\u5148\u7684\uff0c\u672a\u88ab\u4fee\u6539\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u4f8b\u5b50 4"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"function log (target, name, description) {\n  const oldValue = description.value\n  description.value = function () {\n    console.log(`calling ${name} with ${arguments}`)\n    return oldValue.apply(this, arguments)\n  }\n  return description\n}\n\nclass Math{\n  @log\n  add(a, b) {\n    return a + b\n  }\n}\n\nconst m = new Math();\nconst sum = m.add(1,4) // 5\n"})}),"\n",(0,c.jsx)(e.h3,{id:"\u4e09\u65b9\u5e93-core-decorators",children:"\u4e09\u65b9\u5e93 core-decorators"}),"\n",(0,c.jsx)(e.h2,{id:"\u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1",children:"\u8bbe\u8ba1\u539f\u5219\u9a8c\u8bc1"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"\u5c06\u73b0\u6709\u5bf9\u8c61\u548c\u88c5\u9970\u5668\u8fdb\u884c\u5206\u79bb\uff0c\u4e24\u8005\u72ec\u7acb\u5b58\u5728"}),"\n",(0,c.jsx)(e.li,{children:"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219"}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(d,{...n})}):d(n)}},28453:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>a});var s=r(96540);const c={},t=s.createContext(c);function o(n){const e=s.useContext(t);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:o(n.components),s.createElement(t.Provider,{value:e},n.children)}}}]);