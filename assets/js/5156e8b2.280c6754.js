"use strict";(self.webpackChunkmy_website_2=self.webpackChunkmy_website_2||[]).push([[6651],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(96540);const r={},c=s.createContext(r);function l(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(c.Provider,{value:n},e.children)}},48538:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"coding/front-end-engineering/deploy/environment-deploy","title":"\u591a\u73af\u5883\u90e8\u7f72","description":"\u73af\u5883\u7684\u8bbe\u7f6e","source":"@site/docs/coding/front-end-engineering/deploy/environment-release.md","sourceDirName":"coding/front-end-engineering/deploy","slug":"/coding/front-end-engineering/deploy/environment-deploy","permalink":"/docs/coding/front-end-engineering/deploy/environment-deploy","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/coding/front-end-engineering/deploy/environment-release.md","tags":[{"inline":true,"label":"\u5de5\u7a0b\u5316","permalink":"/docs/tags/\u5de5\u7a0b\u5316"},{"inline":true,"label":"\u90e8\u7f72","permalink":"/docs/tags/\u90e8\u7f72"}],"version":"current","frontMatter":{"id":"environment-deploy","title":"\u591a\u73af\u5883\u90e8\u7f72","tags":["\u5de5\u7a0b\u5316","\u90e8\u7f72"]},"sidebar":"tutorialSidebar","previous":{"title":"\u524d\u7aef\u53d1\u5e03\u7b56\u7565","permalink":"/docs/coding/front-end-engineering/release-strategy/frontend-release-strategy"},"next":{"title":"Babel","permalink":"/docs/coding/front-end-engineering/babel"}}');var r=i(74848),c=i(28453);const l={id:"environment-deploy",title:"\u591a\u73af\u5883\u90e8\u7f72",tags:["\u5de5\u7a0b\u5316","\u90e8\u7f72"]},o=void 0,t={},d=[{value:"\u73af\u5883\u7684\u8bbe\u7f6e",id:"\u73af\u5883\u7684\u8bbe\u7f6e",level:2},{value:"\u5e38\u7528\u73af\u5883",id:"\u5e38\u7528\u73af\u5883",level:3},{value:"dev",id:"dev",level:4},{value:"test",id:"test",level:4},{value:"pre",id:"pre",level:4},{value:"prod",id:"prod",level:4},{value:"\u73af\u5883\u7684\u9694\u79bb\u548c\u5207\u6362",id:"\u73af\u5883\u7684\u9694\u79bb\u548c\u5207\u6362",level:2},{value:"\u57df\u540d\u9694\u79bb",id:"\u57df\u540d\u9694\u79bb",level:3},{value:"Hosts \u9694\u79bb",id:"hosts-\u9694\u79bb",level:3},{value:"\u591a\u73af\u5883\u7684\u914d\u7f6e",id:"\u591a\u73af\u5883\u7684\u914d\u7f6e",level:2},{value:"egg.js",id:"eggjs",level:3},{value:"vite",id:"vite",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"\u73af\u5883\u7684\u8bbe\u7f6e",children:"\u73af\u5883\u7684\u8bbe\u7f6e"}),"\n",(0,r.jsx)(n.h3,{id:"\u5e38\u7528\u73af\u5883",children:"\u5e38\u7528\u73af\u5883"}),"\n",(0,r.jsx)(n.h4,{id:"dev",children:"dev"}),"\n",(0,r.jsx)(n.p,{children:"\u5f00\u53d1\u8054\u8c03\u81ea\u6d4b\u73af\u5883"}),"\n",(0,r.jsx)(n.h4,{id:"test",children:"test"}),"\n",(0,r.jsx)(n.p,{children:"\u6d4b\u8bd5\u73af\u5883\uff0c\u76f8\u5bf9\u7a33\u5b9a"}),"\n",(0,r.jsx)(n.h4,{id:"pre",children:"pre"}),"\n",(0,r.jsx)(n.p,{children:"\u9884\u53d1\u73af\u5883\uff0c\u6570\u636e\u771f\u5b9e\uff0c\u4f7f\u7528\u7ebf\u4e0a\u6570\u636e\u5e93"}),"\n",(0,r.jsx)(n.h4,{id:"prod",children:"prod"}),"\n",(0,r.jsx)(n.p,{children:"\u751f\u4ea7\u73af\u5883"}),"\n",(0,r.jsx)(n.h2,{id:"\u73af\u5883\u7684\u9694\u79bb\u548c\u5207\u6362",children:"\u73af\u5883\u7684\u9694\u79bb\u548c\u5207\u6362"}),"\n",(0,r.jsx)(n.h3,{id:"\u57df\u540d\u9694\u79bb",children:"\u57df\u540d\u9694\u79bb"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u901a\u8fc7\u5207\u6362\u8bbf\u95ee\u670d\u52a1\u7684\u57df\u540d\uff0c\u6765\u5207\u6362\u73af\u5883"}),"\n",(0,r.jsx)(n.li,{children:"\u670d\u52a1\u4e4b\u95f4\u7684\u8f6c\u8df3\u3001\u8c03\u7528\u9700\u4e25\u683c\u9075\u5b88\u57df\u540d\u7ea6\u5b9a"}),"\n",(0,r.jsx)(n.li,{children:"\u975e\u751f\u4ea7\u73af\u5883\u548c\u751f\u4ea7\u73af\u5883\u57df\u540d\u4e0d\u540c\uff0c\u53ef\u80fd\u4ee3\u7801\u4e2d\u9700\u8981\u7279\u6b8a\u5904\u7406\uff08\u5982 cookie \u57df\u533a\u5206\u73af\u5883\uff09"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"product-a.corp.com"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"dev: product-a.dev.corp.com"}),"\n",(0,r.jsx)(n.li,{children:"test: product-a.test.corp.com"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u6216\u8005"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"dev: product-a-dev.corp.com"}),"\n",(0,r.jsx)(n.li,{children:"test: product-a-test.corp.com"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"hosts-\u9694\u79bb",children:"Hosts \u9694\u79bb"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u901a\u8fc7\u5207\u6362\u670d\u52a1\u57df\u540d\u5bf9\u5e94\u7684 hosts \u5207\u6362\u73af\u5883"}),"\n",(0,r.jsx)(n.li,{children:"\u7ef4\u62a4\u591a\u4efd hosts \u6620\u5c04\u9700\u8981\u6210\u672c"}),"\n",(0,r.jsx)(n.li,{children:"\u4e0d\u540c\u73af\u5883\u540c\u57df\u540d\u53ef\u80fd\u9020\u6210\u8d26\u53f7\u4e92\u8e22\u3001cookie \u5f02\u5e38\u7b49\u95ee\u9898"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u4e3e\u4f8b product-a.crop.com"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"# dev\n192.168.60.5 product-a.crop.com\n192.168.60.5 product-b.crop.com\n192.168.60.5 product-c.crop.com\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"# test\n192.168.60.6 product-a.crop.com\n192.168.60.6 product-b.crop.com\n192.168.60.6 product-c.crop.com\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u591a\u73af\u5883\u7684\u914d\u7f6e",children:"\u591a\u73af\u5883\u7684\u914d\u7f6e"}),"\n",(0,r.jsx)(n.h3,{id:"eggjs",children:"egg.js"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"config.default.js"}),"\n",(0,r.jsx)(n.li,{children:"config.dev.js"}),"\n",(0,r.jsx)(n.li,{children:"config.local.js"}),"\n",(0,r.jsx)(n.li,{children:"config.prod.js"}),"\n",(0,r.jsx)(n.li,{children:"config.test.js"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["default \u4e3a\u9ed8\u8ba4\u914d\u7f6e\uff0c\u73af\u5883\u53d8\u91cf ",(0,r.jsx)(n.code,{children:"EGG_SERVER_ENV"})," \u63a7\u5236\u914d\u7f6e\u52a0\u8f7d\u5177\u4f53\u5e94\u7528\u7684\u73af\u5883\u914d\u7f6e\u4e3a ",(0,r.jsx)(n.code,{children:"config.[EGG_SERVER_ENV].js"})," \u548c ",(0,r.jsx)(n.code,{children:"config.default.js"})," \u6df1\u5ea6\u5408\u5e76"]}),"\n",(0,r.jsx)(n.h3,{id:"vite",children:"vite"}),"\n",(0,r.jsx)(n.p,{children:"\u5b9e\u73b0\u4e00\u4e2a\u914d\u7f6e\u52a0\u8f7d\u673a\u5236"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="packages/@vue/cli-service/lib/Service.js"',children:"loadEnv (mode) {\n  const logger = debug('vue:env')\n  const basePath = path.resolve(this.context, `.env${mode ? `.${mode}` : ``}`)\n  const localPath = `${basePath}.local`\n\n  const load = envPath => {\n    try {\n      const env = dotenv.config({ path: envPath, debug: process.env.DEBUG })\n      dotenvExpand(env)\n      logger(envPath, env)\n    } catch (err) {\n      // only ignore error if file is not found\n      if (err.toString().indexOf('ENOENT') < 0) {\n        error(err)\n      }\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="packages/@vue/cli-service/lib/Service.js"',children:"init (mode = process.env.VUE_CLI_MODE) {\n  if (this.initialized) {\n    return\n  }\n  this.initialized = true\n  this.mode = mode\n\n  // load mode .env\n  if (mode) {\n    this.loadEnv(mode)\n  }\n  // load base .env\n  this.loadEnv()\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:'title="packages/@vue/cli-service/webpack.config.js"',children:"// this file is for cases where we need to access the\n// webpack config as a file when using CLI commands.\n\nlet service = process.VUE_CLI_SERVICE;\n\nif (!service || process.env.VUE_CLI_API_MODE) {\n  const Service = require('./lib/Service');\n  service = new Service(process.env.VUE_CLI_CONTEXT || process.cwd());\n  service.init(process.env.VUE_CLI_MODE || process.env.NODE_ENV);\n}\n\nmodule.exports = service.resolveWebpackConfig();\n"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);