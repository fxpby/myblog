"use strict";(self.webpackChunkmy_website_2=self.webpackChunkmy_website_2||[]).push([[6199],{28453:(n,e,r)=>{r.d(e,{R:()=>c,x:()=>l});var t=r(96540);const o={},s=t.createContext(o);function c(n){const e=t.useContext(s);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:c(n.components),t.createElement(s.Provider,{value:e},n.children)}},48478:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>c,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"coding/javascript/compare-value","title":"typeof/instanceof/{}.toString \u68c0\u67e5\u7c7b\u578b","description":"typeof","source":"@site/docs/coding/javascript/compare-value.md","sourceDirName":"coding/javascript","slug":"/coding/javascript/compare-value","permalink":"/docs/coding/javascript/compare-value","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/coding/javascript/compare-value.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u5b9e\u73b0 apply/call/bind","permalink":"/docs/coding/javascript/apply-call-bind"},"next":{"title":"compose \u548c pipe \u51fd\u6570","permalink":"/docs/coding/javascript/compose-pipe"}}');var o=r(74848),s=r(28453);const c={},l="typeof/instanceof/.toString \u68c0\u67e5\u7c7b\u578b",i={},a=[{value:"typeof",id:"typeof",level:2},{value:"\u76f8\u5173\u77e5\u8bc6\u70b9",id:"\u76f8\u5173\u77e5\u8bc6\u70b9",level:3},{value:"function \u989d\u5916\u77e5\u8bc6\u70b9",id:"function-\u989d\u5916\u77e5\u8bc6\u70b9",level:3},{value:"\u624b\u5199 \u4f2a typeof",id:"\u624b\u5199-\u4f2a-typeof",level:3},{value:"v8 \u5b9e\u73b0",id:"v8-\u5b9e\u73b0",level:3},{value:"instanceof",id:"instanceof",level:2},{value:"Object.prototype.isPrototypeOf()",id:"objectprototypeisprototypeof",level:3},{value:"\u624b\u5199\u5b9e\u73b0 instanceof",id:"\u624b\u5199\u5b9e\u73b0-instanceof",level:3},{value:"\u65b9\u6cd5\u4e00\uff1a\u9012\u5f52",id:"\u65b9\u6cd5\u4e00\u9012\u5f52",level:4},{value:"\u65b9\u6cd5\u4e8c\uff1a\u94fe\u8868",id:"\u65b9\u6cd5\u4e8c\u94fe\u8868",level:4},{value:"Object.prototype.toString",id:"objectprototypetostring",level:2},{value:"Symbol.toStringTag",id:"symboltostringtag",level:3}];function p(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsxs)(e.h1,{id:"typeofinstanceoftostring-\u68c0\u67e5\u7c7b\u578b",children:["typeof/instanceof/",".toString \u68c0\u67e5\u7c7b\u578b"]})}),"\n",(0,o.jsx)(e.h2,{id:"typeof",children:"typeof"}),"\n",(0,o.jsx)(e.h3,{id:"\u76f8\u5173\u77e5\u8bc6\u70b9",children:"\u76f8\u5173\u77e5\u8bc6\u70b9"}),"\n",(0,o.jsx)(e.p,{children:"typeof \u7528\u6765\u5224\u65ad\u57fa\u672c\u7c7b\u578b(Undefined, null, Boolean, Number, String, bigint, symbol\uff08es6\uff09),\u6700\u9002\u5408\u7528\u6765\u5224\u65ad\u4e00\u4e2a\u503c\u662f\u5426\u4e3a string/number/boolean/undefined"}),"\n",(0,o.jsx)(e.p,{children:"\u5982\u679c\u503c\u662f\u5bf9\u8c61\u6216 null, \u5c06\u8fd4\u56de object"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:'typeof undeclared; // "undefined"\r\ntypeof undefined; // "undefined"\r\ntypeof 123.1; // "number"\r\ntypeof "hello world"; // "string"\r\ntypeof false; // "boolean"\r\ntypeof null; // "object"\r\ntypeof function () {}; // "function"\r\ntypeof [1, 2]; // "object"\r\ntypeof NaN; // "number"\r\ntypeof /^3$/; // "object"\r\ntypeof document.all; // "undefined"  \u8fd9\u795e\u4e0d\u795e\u5947\n'})}),"\n",(0,o.jsx)(e.p,{children:"typeof \u5bf9 undefined \u548c undeclared \u53d8\u91cf\u90fd\u8fd4\u56de undefined"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"\u5728 V8 \u4e2d\uff0c\u6bcf\u4e00\u4e2a Javascript \u5bf9\u8c61\u90fd\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5173\u8054\u7684 Map \u5bf9\u8c61\uff0cMap \u5bf9\u8c61\u63cf\u8ff0 Javascript \u5bf9\u8c61\u7c7b\u578b\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u7c7b\u4f3c\u5143\u6570\u636e\r\nMap \u5bf9\u8c61\u4e3b\u8981\u4f7f\u7528 16 bit \u7684 instance_type \u5b57\u6bb5\u6765\u63cf\u8ff0\u5bf9\u5e94 Javascript \u5bf9\u8c61\u7684\u7c7b\u578b"}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"ECMA-262 \u89c4\u5b9a,\u4efb\u4f55\u5b9e\u73b0\u5185\u90e8[[Call]]\u65b9\u6cd5\u7684\u5bf9\u8c61\u90fd\u5e94\u8be5\u5728 typeof \u68c0\u6d4b\u65f6\u8fd4\u56de function"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"function \u4e5f\u662f Javascript \u7684\u4e00\u4e2a\u5185\u7f6e\u7c7b\u578b\uff0c\u7136\u800c\u67e5\u9605\u89c4\u8303\u5c31\u4f1a\u77e5\u9053\u5b83\u5b9e\u9645\u4e0a\u65f6 object \u7684\u4e00\u4e2a\u201c\u5b50\u7c7b\u578b\u201d\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u51fd\u6570\u65f6\u201c\u53ef\u8c03\u7528\u5bf9\u8c61\u201d\u3002\u5b83\u6709\u4e00\u4e2a\u5185\u90e8\u5c5e\u6027[[Call]], \u8be5\u5c5e\u6027\u4f7f\u5176\u53ef\u4ee5\u88ab\u8c03\u7528\u3002 --\u4f60\u4e0d\u77e5\u9053\u7684 JavaScript"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"function-\u989d\u5916\u77e5\u8bc6\u70b9",children:"function \u989d\u5916\u77e5\u8bc6\u70b9"}),"\n",(0,o.jsx)(e.p,{children:"\u51fd\u6570\u4e5f\u662f\u6709\u5c5e\u6027\u7684\uff0c\u51fd\u6570\u5bf9\u8c61\u7684 length \u5c5e\u6027\u662f\u5176\u58f0\u660e\u7684\u53c2\u6570\u7684\u4e2a\u6570"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:'function fn(a, b, c, d) {\r\n  return "\u731c\u731c\u6211\u7684length";\r\n}\r\nconsole.log(fn.length); // 4\n'})}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"\u6570\u7ec4\u4e5f\u662f object \u7684\u4e00\u4e2a\u201c\u5b50\u7c7b\u578b\u201d\uff0c\u6570\u7ec4\u7684\u5143\u7d20\u6309\u6570\u5b57\u987a\u5e8f\u6765\u8fdb\u884c\u7d22\u5f15\uff08\u800c\u975e\u50cf\u666e\u901a\u5bf9\u8c61\u90a3\u6837\u901a\u8fc7\u5b57\u7b26\u4e32\u952e\u503c\uff09\uff0c\u5176 length \u5c5e\u6027\u662f\u5143\u7d20\u7684\u4e2a\u6570"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"\u624b\u5199-\u4f2a-typeof",children:"\u624b\u5199 \u4f2a typeof"}),"\n",(0,o.jsx)(e.p,{children:"undeclared \u65e0\u6cd5\u5b9e\u73b0"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:'function falseTypeof(val) {\r\n  const defaultType = Object.prototype.toString\r\n    .call(val)\r\n    .slice(8, -1)\r\n    .toLowerCase();\r\n\r\n  const map = {\r\n    string: true,\r\n    boolean: true,\r\n    number: true,\r\n    undefined: true,\r\n    bigint: true,\r\n    symbol: true,\r\n    function: true,\r\n  };\r\n\r\n  const isDocumentAll =\r\n    String(val) === "document.all" && defaultType === "htmlallcollection";\r\n\r\n  if (isDocumentAll) {\r\n    return "undefined";\r\n  }\r\n\r\n  if (map[defaultType]) {\r\n    return defaultType;\r\n  }\r\n\r\n  return "object";\r\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"v8-\u5b9e\u73b0",children:"v8 \u5b9e\u73b0"}),"\n",(0,o.jsx)(e.p,{children:"\u5f88\u597d\u5947 v8 \u662f\u600e\u4e48\u5b9e\u73b0\u7684, \u641c\u4e86\u4e0b\u5927\u4f6c\u4eec\u7684\u6587\u7ae0, \u4e0a\u8fde\u63a5"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:"https://zhuanlan.zhihu.com/p/143590829",children:"https://zhuanlan.zhihu.com/p/143590829"})}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"instanceof",children:"instanceof"}),"\n",(0,o.jsx)(e.p,{children:"\u521a\u624d\u770b\u5230\u4e86 typeof \u5bf9\u4e00\u4e9b\u57fa\u672c\u7c7b\u578b\u503c\u6bd4\u8f83\u6709\u7528, \u90a3\u4e48\u5f15\u7528\u7c7b\u578b\u600e\u4e48\u529e\u5462, \u522b\u614c, \u6709 instanceof \u5728\u5462"}),"\n",(0,o.jsx)(e.p,{children:"\u5982\u679c\u662f\u7ed9\u5b9a\u5f15\u7528\u7c7b\u578b\u7684\u5b9e\u4f8b, instanceof \u8fd4\u56de true. \u68c0\u6d4b\u57fa\u672c\u7c7b\u578b\u503c, \u8fd4\u56de false"}),"\n",(0,o.jsx)(e.p,{children:"\u4e3e\u4e2a\u6817\u5b50:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"//  \u7ed3\u5408class\r\nclass Person {}\r\nlet Tom = new Person();\r\n\r\nTom instanceof Person; // true\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// \u7ed3\u5408\u6784\u9020\u51fd\u6570\r\nfunction Person() {}\r\nlet Tom = new Person();\r\n\r\nTom instanceof Person; // true\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// \u7ed3\u5408\u5185\u5efaclass\r\nlet arr = [1, 2];\r\n\r\narr instanceof Array; // true\r\narr instanceof Object; // true\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u56e0\u4e3a arr \u4e5f\u5c5e\u4e8e Object \u7c7b, \u5728\u539f\u578b\u4e0a Array \u662f\u7ee7\u627f Object \u7684"}),"\n",(0,o.jsxs)(e.p,{children:["instanceof \u5728\u68c0\u67e5\u7684\u65f6\u5019\u4f1a\u8003\u8651\u539f\u578b\u94fe, \u8fd8\u53ef\u4ee5\u901a\u8fc7\u9759\u6001\u65b9\u6cd5",(0,o.jsx)(e.code,{children:"Symbol.hasInstance"}),"\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u903b\u8f91"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// \u8bbe\u7f6e instanceof \u68c0\u67e5\r\n// \u5047\u8bbe \u6709 canDrinkWater \u5c5e\u6027\u7684\u90fd\u662f Person\r\nclass Person {\r\n  static [Symbol.hasInstance](obj) {\r\n    if (obj.canDrinkWater) {\r\n      return true;\r\n    }\r\n  }\r\n}\r\n\r\nlet obj = {\r\n  canDrinkWater: true,\r\n};\r\n\r\nobj instanceof Person; // true\n"})}),"\n",(0,o.jsx)(e.p,{children:"class \u6ca1\u6709 Symbol.hasInstance \u7684\u8bdd\uff0c\u4f1a\u68c0\u67e5 Class.prototype \u662f\u5426\u7b49\u4e8e\u5bf9\u8c61\u7684\u539f\u578b\u94fe\u4e2d\u7684\u539f\u578b\u4e4b\u4e00"}),"\n",(0,o.jsx)(e.p,{children:"\u4e5f\u5c31\u662f\u987a\u7740\u539f\u578b\u94fe\u4e00\u4e2a\u4e00\u4e2a\u5f80\u4e0a\u6bd4\u8f83\u5f80\u4e0a\u627e"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"obj.__proto__ === Class.prototype ?\r\nobj.__proto__.__proto__ === Class.prototype ?\r\nobj.__proto__.__proto__.__proto__ === Class.prototype\r\n...\r\n// \u627e\u5230\u7b26\u5408\u7684\u5c31\u8fd4\u56de true\r\n// \u5230\u4e86\u539f\u578b\u94fe\u5c3e\u7aef\u8fd8\u6ca1\u6709\u627e\u5230\u7684\u8bdd\uff0c\u8fd4\u56de false\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"class Person {}\r\nclass Tom extends Person {}\r\n\r\nlet tom = new Tom();\r\n\r\ntom instanceof Person; // true\r\n\r\ntom.__proto__; // Tom {}\r\nPerson.prototype; // Person {}\r\ntom.__proto__.__proto__; // Person {}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"objectprototypeisprototypeof",children:"Object.prototype.isPrototypeOf()"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"isPrototypeOf() \u65b9\u6cd5\u7528\u4e8e\u6d4b\u8bd5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u5b58\u5728\u4e8e\u53e6\u4e00\u4e2a\u5bf9\u8c61\u7684\u539f\u578b\u94fe\u4e0a\u3002"}),"\n",(0,o.jsx)(e.li,{children:"prototypeObj.isPrototypeOf(object)"}),"\n"]}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:'isPrototypeOf() \u4e0e instanceof \u8fd0\u7b97\u7b26\u4e0d\u540c\u3002\u5728\u8868\u8fbe\u5f0f "object instanceof AFunction"\u4e2d\uff0cobject \u7684\u539f\u578b\u94fe\u662f\u9488\u5bf9 AFunction.prototype \u8fdb\u884c\u68c0\u67e5\u7684\uff0c\u800c\u4e0d\u662f\u9488\u5bf9 AFunction \u672c\u8eab\u3002 -- MDN'}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"function Person() {}\r\nlet tom = new Person();\r\ntom instanceof Person; // true\r\nPerson.prototype.isPrototypeOf(tom); // true\r\n\r\n// \u4fee\u6539 prototype\r\nPerson.prototype = {};\r\n\r\ntom instanceof Person; // false\r\nPerson.prototype.isPrototypeOf(tom); // false\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"function A() {}\r\nfunction B() {}\r\n\r\nA.prototype = B.prototype = {};\r\n\r\nlet a = new A();\r\n\r\na instanceof B; // true\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5bf9\u4e8e instanceof , \u771f\u6b63\u51b3\u5b9a\u7c7b\u578b\u7684\u662f prototype, \u800c\u4e0d\u662f\u6784\u9020\u51fd\u6570"}),"\n",(0,o.jsx)(e.h3,{id:"\u624b\u5199\u5b9e\u73b0-instanceof",children:"\u624b\u5199\u5b9e\u73b0 instanceof"}),"\n",(0,o.jsx)(e.h4,{id:"\u65b9\u6cd5\u4e00\u9012\u5f52",children:"\u65b9\u6cd5\u4e00\uff1a\u9012\u5f52"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:'const testInstanceof = (obj, target) => {\r\n  if (typeof target !== "function") {\r\n    return false;\r\n  }\r\n  if (obj.__proto__ === null) {\r\n    return false;\r\n  }\r\n  if (obj.__proto__ !== target.prototype) {\r\n    return testInstanceof(obj.__proto__, target);\r\n  } else {\r\n    return true;\r\n  }\r\n};\n'})}),"\n",(0,o.jsx)(e.h4,{id:"\u65b9\u6cd5\u4e8c\u94fe\u8868",children:"\u65b9\u6cd5\u4e8c\uff1a\u94fe\u8868"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:'const testInstanceof = (obj, target) => {\r\n  if (typeof target !== "function") {\r\n    return false;\r\n  }\r\n\r\n  let p = obj;\r\n  while (p) {\r\n    if (p.__proto__ === target.prototype) {\r\n      return true;\r\n    }\r\n    p = p.__proto__;\r\n  }\r\n  return false;\r\n};\n'})}),"\n",(0,o.jsx)(e.h2,{id:"objectprototypetostring",children:"Object.prototype.toString"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u5c06\u4e00\u4e2a\u666e\u901a\u5bf9\u8c61\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32"}),"\n",(0,o.jsx)(e.li,{children:"\u7528\u4e8e\u68c0\u67e5\u57fa\u672c\u6570\u636e\u7c7b\u578b\u3001\u5185\u5efa\u5bf9\u8c61\u548c\u5305\u542b Symbol.toStringTag \u5c5e\u6027\u7684\u5bf9\u8c61"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"symboltostringtag",children:"Symbol.toStringTag"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u53ef\u4ee5\u4f7f\u7528\u7279\u6b8a\u7684\u5bf9\u8c61\u5c5e\u6027 Symbol.toStringTag \u81ea\u5b9a\u4e49\u5bf9\u8c61\u7684 toString \u65b9\u6cd5\u7684\u884c\u4e3a"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:'let olu = {\r\n  [Symbol.toStringTag]: "Olu",\r\n};\r\nObject.prototype.toString.call(olu); // "[object Olu]"\n'})}),"\n",(0,o.jsx)(e.p,{children:"\u54c8\u54c8\uff0c\u611f\u89c9\u8fd9\u4e2a\u6bd4 typeof \u5389\u5bb3"})]})}function d(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(p,{...n})}):p(n)}}}]);