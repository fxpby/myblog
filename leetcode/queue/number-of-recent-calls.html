<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>933. 最近的请求次数 | fxpby和olu是好朋友</title>
    <meta name="generator" content="VuePress 1.9.6">
    <script>
			var _hmt = _hmt || [];
			(function() {
				var hm = document.createElement("script");
				hm.src = "https://hm.baidu.com/hm.js?560be5dada9664ddc2907a2c2e79f23b";
				var s = document.getElementsByTagName("script")[0]; 
				s.parentNode.insertBefore(hm, s);
			})();
		</script>
    <meta name="description" content="">
    
    <link rel="preload" href="/myblog/assets/css/0.styles.5bfde816.css" as="style"><link rel="preload" href="/myblog/assets/js/app.d94ad89f.js" as="script"><link rel="preload" href="/myblog/assets/js/2.dfc0c1ce.js" as="script"><link rel="preload" href="/myblog/assets/js/53.210cc572.js" as="script"><link rel="prefetch" href="/myblog/assets/js/10.12dc231e.js"><link rel="prefetch" href="/myblog/assets/js/11.d3c64638.js"><link rel="prefetch" href="/myblog/assets/js/12.5e57138f.js"><link rel="prefetch" href="/myblog/assets/js/13.0a0c6537.js"><link rel="prefetch" href="/myblog/assets/js/14.03dec7d2.js"><link rel="prefetch" href="/myblog/assets/js/15.4706d570.js"><link rel="prefetch" href="/myblog/assets/js/16.c50b2fbd.js"><link rel="prefetch" href="/myblog/assets/js/17.22f107be.js"><link rel="prefetch" href="/myblog/assets/js/18.6c20532a.js"><link rel="prefetch" href="/myblog/assets/js/19.72ca681e.js"><link rel="prefetch" href="/myblog/assets/js/20.42630af6.js"><link rel="prefetch" href="/myblog/assets/js/21.592a26ba.js"><link rel="prefetch" href="/myblog/assets/js/22.d8f32959.js"><link rel="prefetch" href="/myblog/assets/js/23.d5f2c4ee.js"><link rel="prefetch" href="/myblog/assets/js/24.353733e0.js"><link rel="prefetch" href="/myblog/assets/js/25.a3a9bba9.js"><link rel="prefetch" href="/myblog/assets/js/26.502ef91d.js"><link rel="prefetch" href="/myblog/assets/js/27.96b1f479.js"><link rel="prefetch" href="/myblog/assets/js/28.162c6931.js"><link rel="prefetch" href="/myblog/assets/js/29.81d947f7.js"><link rel="prefetch" href="/myblog/assets/js/3.c71d163a.js"><link rel="prefetch" href="/myblog/assets/js/30.2db1e89d.js"><link rel="prefetch" href="/myblog/assets/js/31.1c0e2d5e.js"><link rel="prefetch" href="/myblog/assets/js/32.b3c8e783.js"><link rel="prefetch" href="/myblog/assets/js/33.eaa241e6.js"><link rel="prefetch" href="/myblog/assets/js/34.0c6f2cb1.js"><link rel="prefetch" href="/myblog/assets/js/35.302b98c0.js"><link rel="prefetch" href="/myblog/assets/js/36.59c5e7d6.js"><link rel="prefetch" href="/myblog/assets/js/37.3c0cfd64.js"><link rel="prefetch" href="/myblog/assets/js/38.86b2f6f0.js"><link rel="prefetch" href="/myblog/assets/js/39.8265605e.js"><link rel="prefetch" href="/myblog/assets/js/4.e2af1ca1.js"><link rel="prefetch" href="/myblog/assets/js/40.1debcb15.js"><link rel="prefetch" href="/myblog/assets/js/41.27be5dda.js"><link rel="prefetch" href="/myblog/assets/js/42.a70054ae.js"><link rel="prefetch" href="/myblog/assets/js/43.014dac30.js"><link rel="prefetch" href="/myblog/assets/js/44.488720b7.js"><link rel="prefetch" href="/myblog/assets/js/45.595f6528.js"><link rel="prefetch" href="/myblog/assets/js/46.8b1d95dc.js"><link rel="prefetch" href="/myblog/assets/js/47.d723275b.js"><link rel="prefetch" href="/myblog/assets/js/48.65dcae3d.js"><link rel="prefetch" href="/myblog/assets/js/49.794a73e7.js"><link rel="prefetch" href="/myblog/assets/js/5.64305ba1.js"><link rel="prefetch" href="/myblog/assets/js/50.2c34dcf4.js"><link rel="prefetch" href="/myblog/assets/js/51.478b3ada.js"><link rel="prefetch" href="/myblog/assets/js/52.70db8f81.js"><link rel="prefetch" href="/myblog/assets/js/54.3b4506e9.js"><link rel="prefetch" href="/myblog/assets/js/55.e411f98a.js"><link rel="prefetch" href="/myblog/assets/js/56.2254f7b7.js"><link rel="prefetch" href="/myblog/assets/js/57.e263aff4.js"><link rel="prefetch" href="/myblog/assets/js/58.a31f2850.js"><link rel="prefetch" href="/myblog/assets/js/59.1a7eb8df.js"><link rel="prefetch" href="/myblog/assets/js/6.93d03fc1.js"><link rel="prefetch" href="/myblog/assets/js/60.11e679f8.js"><link rel="prefetch" href="/myblog/assets/js/61.35d79bb9.js"><link rel="prefetch" href="/myblog/assets/js/62.b6268feb.js"><link rel="prefetch" href="/myblog/assets/js/63.3ba2d715.js"><link rel="prefetch" href="/myblog/assets/js/64.8a3472c3.js"><link rel="prefetch" href="/myblog/assets/js/65.cb3e7a02.js"><link rel="prefetch" href="/myblog/assets/js/66.7c31253d.js"><link rel="prefetch" href="/myblog/assets/js/67.82df2971.js"><link rel="prefetch" href="/myblog/assets/js/68.cf1d6076.js"><link rel="prefetch" href="/myblog/assets/js/69.ea9ecb3c.js"><link rel="prefetch" href="/myblog/assets/js/7.e4892b43.js"><link rel="prefetch" href="/myblog/assets/js/70.7c6e2b13.js"><link rel="prefetch" href="/myblog/assets/js/71.1f300a08.js"><link rel="prefetch" href="/myblog/assets/js/72.352f2145.js"><link rel="prefetch" href="/myblog/assets/js/73.1e325ff3.js"><link rel="prefetch" href="/myblog/assets/js/74.cd05d83c.js"><link rel="prefetch" href="/myblog/assets/js/75.f3336cb4.js"><link rel="prefetch" href="/myblog/assets/js/76.cd863e46.js"><link rel="prefetch" href="/myblog/assets/js/77.a1dace99.js"><link rel="prefetch" href="/myblog/assets/js/78.b451eb6e.js"><link rel="prefetch" href="/myblog/assets/js/79.628c0b0c.js"><link rel="prefetch" href="/myblog/assets/js/8.6d8ff681.js"><link rel="prefetch" href="/myblog/assets/js/80.a94d03da.js"><link rel="prefetch" href="/myblog/assets/js/81.30c5978e.js"><link rel="prefetch" href="/myblog/assets/js/82.06538e45.js"><link rel="prefetch" href="/myblog/assets/js/83.42f7bc8e.js"><link rel="prefetch" href="/myblog/assets/js/84.c07bed7d.js"><link rel="prefetch" href="/myblog/assets/js/85.e272c90d.js"><link rel="prefetch" href="/myblog/assets/js/86.f102b6dc.js"><link rel="prefetch" href="/myblog/assets/js/87.cdd9a2c4.js"><link rel="prefetch" href="/myblog/assets/js/88.53ab33c7.js"><link rel="prefetch" href="/myblog/assets/js/89.5b657ca0.js"><link rel="prefetch" href="/myblog/assets/js/9.0fe0d3fc.js"><link rel="prefetch" href="/myblog/assets/js/90.dbaa2f8b.js"><link rel="prefetch" href="/myblog/assets/js/91.eeed0de3.js"><link rel="prefetch" href="/myblog/assets/js/92.b0f5a452.js"><link rel="prefetch" href="/myblog/assets/js/93.5e0720f5.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.5bfde816.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myblog/" class="home-link router-link-active"><!----> <span class="site-name">fxpby和olu是好朋友</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myblog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/myblog/note/HTML/favicon.html" class="nav-link">
  博文
</a></div><div class="nav-item"><a href="/myblog/designPattern/uml/uml.html" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/myblog/dataStructures/array/array.html" class="nav-link">
  数据结构和算法
</a></div><div class="nav-item"><a href="/myblog/leetcode/array/twosum.html" class="nav-link">
  力扣
</a></div><div class="nav-item"><a href="/myblog/exercise/BitCounting.html" class="nav-link">
  副本打怪
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/myblog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/myblog/note/HTML/favicon.html" class="nav-link">
  博文
</a></div><div class="nav-item"><a href="/myblog/designPattern/uml/uml.html" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/myblog/dataStructures/array/array.html" class="nav-link">
  数据结构和算法
</a></div><div class="nav-item"><a href="/myblog/leetcode/array/twosum.html" class="nav-link">
  力扣
</a></div><div class="nav-item"><a href="/myblog/exercise/BitCounting.html" class="nav-link">
  副本打怪
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>栈</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/leetcode/stack/valid-parentheses.html" class="sidebar-link">20.有效的括号</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>队列</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/leetcode/queue/number-of-recent-calls.html" aria-current="page" class="active sidebar-link">933.最近的请求次数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/leetcode/queue/number-of-recent-calls.html#题目描述" class="sidebar-link">题目描述</a></li><li class="sidebar-sub-header"><a href="/myblog/leetcode/queue/number-of-recent-calls.html#解题方法" class="sidebar-link">解题方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/leetcode/queue/number-of-recent-calls.html#方法一-队列" class="sidebar-link">方法一：队列</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>链表</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/leetcode/linkedList/add-two-numbers.html" class="sidebar-link">2.两数相加</a></li><li><a href="/myblog/leetcode/linkedList/linked-list-cycle.html" class="sidebar-link">141.环形链表</a></li><li><a href="/myblog/leetcode/linkedList/remove-duplicates-from-sorted-list.html" class="sidebar-link">83.删除排序链表中的重复元素</a></li><li><a href="/myblog/leetcode/linkedList/reverse-linked-list.html" class="sidebar-link">206.反转单链表</a></li><li><a href="/myblog/leetcode/linkedList/delete-node-in-a-linked-list.html" class="sidebar-link">237.删除链表中的节点</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数组</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/leetcode/array/twosum.html" class="sidebar-link">两数之和</a></li><li><a href="/myblog/leetcode/array/remove-duplicates-from-sorted-array.html" class="sidebar-link">删除排序数组中的重复项</a></li><li><a href="/myblog/leetcode/array/remove-element.html" class="sidebar-link">移除指定元素</a></li><li><a href="/myblog/leetcode/array/search-insert-position.html" class="sidebar-link">搜索插入位置</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_933-最近的请求次数"><a href="#_933-最近的请求次数" class="header-anchor">#</a> 933. 最近的请求次数</h1> <h2 id="题目描述"><a href="#题目描述" class="header-anchor">#</a> 题目描述</h2> <p>写一个 RecentCounter 类来计算特定时间范围内最近的请求。</p> <p>请你实现 RecentCounter 类：</p> <p>RecentCounter() 初始化计数器，请求数为 0 。
int ping(int t) 在时间 t 添加一个新请求，其中 t 表示以毫秒为单位的某个时间，并返回过去 3000 毫秒内发生的所有请求数（包括新请求）。确切地说，返回在 [t-3000, t] 内发生的请求数。
保证 每次对 ping 的调用都使用比之前更大的 t 值。</p> <p>You have a RecentCounter class which counts the number of recent requests within a certain time frame.</p> <p>Implement the RecentCounter class:</p> <p>RecentCounter() Initializes the counter with zero recent requests.
int ping(int t) Adds a new request at time t, where t represents some time in milliseconds, and returns the number of requests that has happened in the past 3000 milliseconds (including the new request). Specifically, return the number of requests that have happened in the inclusive range [t - 3000, t].
It is guaranteed that every call to ping uses a strictly larger value of t than the previous call.</p> <p></p> <p>Example 1:</p> <div class="language-js extra-class"><pre class="language-js"><code>Input
<span class="token punctuation">[</span><span class="token string">&quot;RecentCounter&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ping&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ping&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ping&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ping&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3001</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3002</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
Output
<span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

Explanation
RecentCounter recentCounter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RecentCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
recentCounter<span class="token punctuation">.</span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// requests = [1], range is [-2999,1], return 1</span>
recentCounter<span class="token punctuation">.</span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// requests = [1, 100], range is [-2900,100], return 2</span>
recentCounter<span class="token punctuation">.</span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token number">3001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// requests = [1, 100, 3001], range is [1,3001], return 3</span>
recentCounter<span class="token punctuation">.</span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token number">3002</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// requests = [1, 100, 3001, 3002], range is [2,3002], return 3</span>
</code></pre></div><p>提示：</p> <p>1 &lt;= t &lt;= 109
保证每次对 ping 调用所使用的 t 值都 严格递增
至多调用 ping 方法 104 次</p> <p>Constraints:</p> <p>1 &lt;= t &lt;= 109
Each test case will call ping with strictly increasing values of t.
At most 104 calls will be made to ping.</p> <h2 id="解题方法"><a href="#解题方法" class="header-anchor">#</a> 解题方法</h2> <h3 id="方法一-队列"><a href="#方法一-队列" class="header-anchor">#</a> 方法一：队列</h3> <ul><li><p>思路：
越早发出的请求，越早在距离最近3000毫秒内的请求中拜拜，符合先进先出的原则，使用队列</p></li> <li><p>步骤：</p> <ul><li>创建一个队列，用于存放请求时刻</li> <li>发起新请求时，新请求 t 进入队列尾部</li> <li>如果队列头部请求距离新请求超过3000毫秒，则队头出队，(去除所有 3000 毫秒外的时刻)</li> <li>返回队列中存储的请求数(队列长度)</li></ul></li> <li><p>复杂度分析：</p> <ul><li>时间复杂度：O(N), N为出队的请求数</li> <li>空间复杂度：O(N), N为3000毫秒内队列中存储的请求数</li></ul></li> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">RecentCounter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function">ping</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
    <span class="token keyword">const</span> time <span class="token operator">=</span> t <span class="token operator">-</span> <span class="token number">3000</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span>length
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">RecentCounter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function">ping</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
    <span class="token keyword">const</span> time <span class="token operator">=</span> t <span class="token operator">-</span> <span class="token number">3000</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span>length
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/myblog/leetcode/stack/valid-parentheses.html" class="prev">
        20.有效的括号
      </a></span> <span class="next"><a href="/myblog/leetcode/linkedList/add-two-numbers.html">
        2.两数相加
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/myblog/assets/js/app.d94ad89f.js" defer></script><script src="/myblog/assets/js/2.dfc0c1ce.js" defer></script><script src="/myblog/assets/js/53.210cc572.js" defer></script>
  </body>
</html>
